{% load static tailwind_tags %}
<!DOCTYPE html>
<html data-theme="ebs" lang="en">
	<head>
		<link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans&family=Lora&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">
    
		

		<title>Connect wallet | CardaBot</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">

		{% tailwind_css %}
		<link rel="icon" type="image/x-icon" href="{% static 'media/favicon.ico' %}">
		<script> 
			async function connectWallet(wallet) {
				try {
					var api = await eval("window.cardano." + wallet + ".enable()");
				} catch (e) {
					console.error(e);
				}
				
				if (api != null) {
					var stakeKey = await api.getRewardAddresses();
					
					const token = new URLSearchParams(window.location.search).get('token');
					const response = await fetch(
						window.location.origin + '/api/connect/', 
						{
							method: 'POST',
							body: JSON.stringify({
								tmp_token: token,
								cardabot_user: stakeKey[0]
							}),
							headers: {
								'Content-Type': 'application/json',
							}
						}
					);
					if (response.ok) {
						const myJson = await response.json(); //extract JSON from the http response
						alert("Your wallet is now connected to CardaBot!");
					} else {
						console.log("Wallet not connected");
					}
					
				}
			}
		</script>

	</head>

	<body class="bg-base-200 min-h-screen">

	<!-- Navbar -->
		<div class="navbar bg-base-100 px-10 py-0 shadow-sm rounded-2xl mx-30 my-0">
			<div class="flex-1">
				<a href="https://everyblock.studio/" class="btn btn-ghost my-auto" target="_blank">
					<img src="{% static 'media/ebs_logo_icon_color.png' %}" class="h-10"/>
				</a>
				<a href="https://everyblock.studio/" class="btn btn-ghost capitalize text-xl font-bold font-nunito" target="_blank">
					EveryBlock.studio
				</a>
			</div>
			
			<div class="flex-none">
				<a class="btn btn-ghost btn-circle">
					<i class="las la-question-circle" style="font-size: 24px"></i>
				</a>
			<!-- <div class="dropdown dropdown-end">
				<label tabindex="0" class="btn btn-ghost btn-circle">
					<i class="las la-question-circle" style="font-size: 24px"> </i>
				</label>
				<div tabindex="0" class="mt-3 card card-compact dropdown-content w-52 bg-base-100 shadow">
				<div class="card-body">
					<span class="font-bold text-lg">8 Items</span>
					<span class="text-info">Subtotal: $999</span>
					<div class="card-actions">
					<button class="btn btn-ghost btn-block">FAQ</button>
					</div>
				</div>
				</div>
			</div> -->
			<!-- <div class="dropdown dropdown-end">
				<label tabindex="0" class="btn btn-ghost btn-circle avatar">
				<div class="w-10 rounded-full">
					<img src="https://placeimg.com/80/80/people" />
				</div>
				</label>
				<ul tabindex="0" class="menu menu-compact dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box w-52">
				<li>
					<a class="justify-between">
					Profile
					<span class="badge">New</span>
					</a>
				</li>
				<li><a>Settings</a></li>
				<li><a>Logout</a></li>
				</ul>
			</div> -->
			</div>
		</div>
	<!-- End of Navbar -->
	
	<!-- Main content -->
		<div class="grid grid-cols-1 p-12">
			<!-- CardaBot avatar -->
			<div class="avatar">
				<div class="w-24 mask mask-squircle mx-auto">
					<img src="{% static 'media/cardabot-logo.png' %}"/>
				</div>
			</div>

			<!-- Connecting message -->
			<div class="flex p-12"">
				<div class="flex-grow">
					<h1 class="text-neutral font-nunito text-2xl text-center">You're connecting your wallet to <a class="font-bold text-primary">@CardaBot</a></h1>
				</div>
			</div>

			<!-- Wallet connection card -->
			<div class="flex">
				<div class="flex-none"></div>
				<div class="flex-grow bg-base-100 rounded-xl shadow-xl p-12 max-w-xl lg:max-w-2xl mx-auto">
					<div class="grid grid-cols-1">
						<h2 class="text-secondary text-xl text-center font-lora">Choose your wallet</h2>
							<!-- Buttons -->
							<div class="mt-8 mx-40">
								<button id="btnss" class="btn user-action-btn btn-outline btn-block gap-6" onclick="connectWallet('nami')">
									<!-- <i class="las la-wallet" style="font-size: 24px"></i> -->
									<div class="avatar">
										<div class="h-6">
											<img src="{% static 'media/nami-logo.svg' %}" /> 
										</div>
									</div>
									Nami
								</button>
							</div>
							<div class="mt-4 mx-40">
								<button id="btnss" class="btn user-action-btn btn-outline btn-block gap-6" onclick="connectWallet('eternl')">
									<!-- <i class="las la-wallet" style="font-size: 24px"></i> -->
									<div class="avatar">
										<div class="h-8">
											<img src="{% static 'media/eternl-logo.png' %}" /> 
										</div>
									</div>
									Eternl
								</button>
							</div>
							<div class="mt-4 mx-40">
								<button id="btnss" class="btn user-action-btn btn-outline btn-block gap-6" onclick="connectWallet('typhoncip30')">
									<!-- <i class="las la-wallet" style="font-size: 24px"></i> -->
									<div class="avatar">
										<div class="h-6">
											<img src="{% static 'media/typhon-logo.svg' %}" /> 
										</div>
									</div>
									Typhon
								</button>
							</div>


					</div>
					
					
					
				</div>
				
			</div>
		</div>
	<!-- End of Main content -->

	<!-- Footer -->
		<footer class="footer items-center p-4 bg-neutral text-neutral-content sticky top-[100vh]">
			<div class="items-center grid-flow-col">
			  <p> EveryBlock Studio Â© 2022 - All rights reserved</p>
			</div>

			<div class="grid-flow-col gap-0 md:place-self-center md:justify-self-end">
				<a href="https://twitter.com/everyblockstd" class="btn btn-ghost" target="_blank">
					<i class="lab la-twitter" style="font-size: 24px"></i>
				</a>
				<a href="https://www.instagram.com/everyblockstudio/" class="btn btn-ghost" target="_blank">
					<i class="lab la-instagram" style="font-size: 24px"></i>
				</a>
				<a href="https://www.linkedin.com/company/everyblock-studio/" class="btn btn-ghost" target="_blank">
					<i class="lab la-linkedin-in" style="font-size: 24px"></i>
				</a>
				<a href="https://discord.gg/dxNSXpvS9W" class="btn btn-ghost" target="_blank">
					<i class="lab la-discord" style="font-size: 24px"></i>
				</a>
			</div>
		</footer>
	<!-- End of Footer -->
	</body>
</html>
